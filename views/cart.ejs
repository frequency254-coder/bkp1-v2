<div class="container my-5 cart-container text-light">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold neon-text"><i class="bi bi-cart4 me-2"></i>Your Cart</h2>
        <a href="/shop" class="btn btn-outline-neon rounded-pill px-4 py-2">
            <i class="bi bi-bag me-1"></i> Continue Shopping
        </a>
    </div>

    <% if (cart && cart.length) { %>
        <div class="table-responsive rounded-4 shadow-lg overflow-hidden neon-border">
            <table class="table table-dark table-hover align-middle mb-0">
                <thead class="bg-neon-dark text-neon">
                <tr>
                    <th>Product</th>
                    <th class="text-center">Qty</th>
                    <th class="text-end">Price</th>
                    <th class="text-end">Subtotal</th>
                    <th class="text-center">Action</th>
                </tr>
                </thead>
                <tbody>
                <% cart.forEach(item => { %>
                    <tr class="cart-row fade-in-up">
                        <td>
                            <div class="d-flex align-items-center">
                                <img
                                        src="<%= item.product.image || '/images/default.jpg' %>"
                                        alt="<%= item.product.name %>"
                                        class="me-3 rounded shadow-sm border border-secondary"
                                        style="width: 60px; height: 60px; object-fit: cover;"
                                >
                                <div>
                                    <h6 class="fw-semibold mb-0 text-white"><%= item.product.name %></h6>
                                    <small class="text-muted">
                                        ID: <%= (item.product._id ? item.product._id.toString().slice(-6) : 'N/A') %>
                                    </small>

                                </div>
                            </div>
                        </td>
                        <td class="text-center">
                            <span class="badge bg-neon px-3 py-2 fs-6"><%= item.qty %></span>
                        </td>
                        <td class="text-end text-info">Ksh <%= item.product.price.toLocaleString() %></td>
                        <td class="text-end text-warning fw-semibold">
                            Ksh <%= (item.product.price * item.qty).toLocaleString() %>
                        </td>
                        <td class="text-center">
                            <form action="/cart/remove/<%= item.product._id %>" method="post" class="d-inline">
                                <button type="submit" class="btn btn-sm btn-outline-danger rounded-pill px-3">
                                    <i class="bi bi-trash3"></i> Remove
                                </button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
                </tbody>
                <tfoot class="bg-dark">
                <tr>
                    <td colspan="3" class="text-end fw-bold text-uppercase">Total</td>
                    <td class="text-end fw-bold text-success fs-5">
                        Ksh <%= total.toLocaleString() %>
                    </td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
        </div>

        <!-- ðŸ’³ Checkout Buttons -->
        <div class="mt-4 text-end">
            <a href="/checkout" class="btn btn-neon btn-lg rounded-pill px-5 shadow-lg">
                <i class="bi bi-credit-card-2-front"></i> Proceed to Checkout
            </a>
        </div>

    <% } else { %>
        <div class="alert alert-dark text-center neon-border py-5">
            <i class="bi bi-emoji-frown display-4 text-muted"></i>
            <h5 class="mt-3 text-light">Your cart is empty</h5>
            <a href="/shop" class="btn btn-neon mt-3">
                <i class="bi bi-bag"></i> Start Shopping
            </a>
        </div>
    <% } %>
</div>
